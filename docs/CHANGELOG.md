# 更新日志

## v1.0.1 - 2026-01-29

### ✨ 新功能
- 🔄 **自动检测并安装依赖**
  - 启动前自动检查 `node_modules` 是否存在
  - 自动识别包管理器（pnpm/yarn/npm）
  - 实时显示安装进度
  - 安装完成后自动启动项目
- 🛡️ **智能进程管理**
  - 删除项目时自动停止正在运行的服务器
  - 关闭程序时自动停止所有服务器
  - 避免留下孤立进程和端口占用
- 🎨 **应用自定义图标**
  - 添加专属应用图标
  - 窗口和任务栏显示自定义图标

### 🐛 Bug 修复
- ✅ 修复了缺少依赖时启动失败的问题
- ✅ 修复了删除运行中项目可能留下进程的问题
- ✅ 修复了关闭程序时进程未清理的问题
- ✅ 修复了 Electron 在开发环境下无法运行的问题
- ✅ 修复了应用图标显示为默认图标的问题

### �️ 图标未更换问题解决方法
1. 确保 `build/icon.ico` 为多尺寸 ICO（至少包含 16/32/48/64/128/256）。
2. 确认 `package.json` 中已设置 `build.icon`/`win.icon` 指向 `build/icon.ico`。
3. 重新打包后卸载旧版本，删除旧快捷方式再安装新包。
4. 如果仍未更新，清理 Windows 图标缓存并重启资源管理器。

### �🔧 技术改进
- 📦 更新打包配置,输出目录改为 `release/`
- 🔧 优化图标路径配置,支持开发和生产环境
- 📝 完善开发文档,添加环境配置说明

### 📝 使用说明

#### 自动依赖安装
现在可以直接启动没有 `node_modules` 的项目：
1. 选择项目文件夹
2. 点击"启动"按钮
3. 应用自动检测并安装依赖
4. 安装完成后自动启动

输出示例：
```
检测到缺少 node_modules 目录，正在使用 pnpm 安装依赖...
执行命令: pnpm install

Packages: +399
Progress: resolved 399, reused 399, downloaded 0, added 399, done

✓ 依赖安装完成，开始启动项目...

> my-project@1.0.0 dev
> vite
```

#### 智能进程管理
- 删除项目前会自动停止服务器
- 关闭程序时会自动清理所有运行中的服务器
- 确保不会留下后台进程

### 🎯 包管理器检测规则

**优先级**：
1. 检测到 `pnpm-lock.yaml` → 使用 **pnpm**
2. 检测到 `yarn.lock` → 使用 **yarn**
3. 检测到 `package-lock.json` → 使用 **npm**
4. 默认 → 使用 **npm**

---

## v1.0.0 - 2026-01-29

### ✨ 新功能
- 🎉 **不再需要配置文件！** 应用现在可以自动检测项目
- 📦 自动读取 `package.json` 并识别启动命令
- 🔍 智能检测包管理器（npm/yarn/pnpm）
- 🚀 自动选择最佳启动命令（dev > start > serve）

### 🐛 Bug 修复
- ✅ 修复了 preload 脚本模块导入问题
- ✅ 修复了界面空白的问题
- ✅ 修复了文件路径解析错误

### 📝 使用说明

#### 方式一：自动检测（推荐）
1. 点击"选择项目文件夹"
2. 选择包含 `package.json` 的项目文件夹
3. 应用自动检测配置并启动

#### 方式二：使用配置文件（可选）
如果需要更精细的控制，仍然可以创建 `dev-config.json`：

```json
{
  "name": "我的项目",
  "command": "npm run dev",
  "cwd": "/path/to/project"
}
```

### 🎯 自动检测规则

**启动命令优先级**：
1. `npm run dev` （如果 package.json 中有 dev 脚本）
2. `npm run start` （如果有 start 脚本）
3. `npm run serve` （如果有 serve 脚本）

**包管理器检测**：
- 如果存在 `pnpm-lock.yaml` → 使用 pnpm
- 如果存在 `yarn.lock` → 使用 yarn
- 否则 → 使用 npm

### 📦 文件位置
- **安装程序**: `release/自动开发服务器启动工具 Setup 1.0.1.exe`
- **便携版本**: `release/win-unpacked/自动开发服务器启动工具.exe`
- **大小**: 安装程序约 92 MB，便携版约 203 MB

### 🔧 技术改进
- 优化了 preload 脚本，移除了外部依赖
- 改进了配置加载逻辑
- 增强了错误处理

### 📚 相关文档
- [README.md](./README.md) - 完整使用说明
- [使用说明.md](./使用说明.md) - 详细指南
- [GUI_PROJECT_SUMMARY.md](../GUI_PROJECT_SUMMARY.md) - 项目总结
